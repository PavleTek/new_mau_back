generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id        Int     @id @default(autoincrement())
  username  String  @unique(map: "User_username_key")
  name      String
  password  String
  is_admin  Boolean @default(false)
  mandatory Boolean @default(false)
}

model Tbl_Centrals {
  id               Int                @id @default(autoincrement())
  cen_name          String
  cen_address       String
  cen_longitude     Float?
  cen_latitude      Float?
  Tbl_Generators_1 Tbl_Generators_1[]
}

model Tbl_Generators_1 {
  id                      Int          @id @default(autoincrement())
  name                    String
  central_id              Int
  fn_prefix               String
  freq_nominal            Float?
  pelec_nominal           Float?
  db_min                  Float?
  db_max                  Float?
  droop_min               Float?
  droop_max               Float?
  rise_time_min           Float?
  rise_time_max           Float?
  p_set_min               Float?
  p_set_max               Float?
  psetp_min_difference_pu Float?
  pearson_max             Float?
  Tbl_Centrals            Tbl_Centrals @relation(fields: [central_id], references: [id])
  Tbl_RAU                 Tbl_RAU[]
}

model Tbl_RAU {
  id               Int              @id @default(autoincrement())
  rau_type_id      Int
  gen_id           Int?
  is_master        Boolean          @default(false)
  running          Boolean          @default(false)
  scale_factor_u   Float?
  scale_factor_i   Float?
  p_set_scale      Float?
  p_set_offset     Float?
  rau_conf         String?   @db.LongText
  Tbl_Generators_1 Tbl_Generators_1? @relation(fields: [gen_id], references: [id])
  Tbl_RawData      Tbl_RawData[]
  Tbl_Rau_Type     Tbl_Rau_Type     @relation(fields: [rau_type_id], references: [id])
}

model Tbl_RawData {
  id            Int      @id @default(autoincrement())
  rau_id        Int
  timestamp     DateTime
  serial_number String
  status        String
  est_freq      Float?
  est_p         Float?
  est_q         Float?
  est_s         Float?
  est_fi        Float?
  est_fi_deg    Float?
  est_pset      Float?
  channel_raw   String
  Tbl_RAU       Tbl_RAU  @relation(fields: [rau_id], references: [id])
}

model Tbl_Rau_Type {
  id                Int       @id @default(autoincrement())
  type_name         String
  type_description  String
  conf_file         String?   @db.LongText
  Tbl_RAU           Tbl_RAU[]
}

model system {
  id    Int     @id @default(autoincrement())
  key   String  @unique @map("_key") @db.VarChar(40)
  value String? @map("_value") @db.Text
}
